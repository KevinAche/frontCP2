<section class="vh-100">
  <div class="container-fluid">

    <!--Titulo-->
    <mat-card-title style="background-color:#1d3557; color:white; padding: 20px; border-radius: 5px">
      SOLICITUD ESTUDIANTE
    </mat-card-title>
    <br><br>
    <!--LISTA CONVOCATORIAS-->
    <br>

    <mat-card class="card" *ngFor="let convocatoria of convocatorias">
      <mat-card-header>
        <mat-card-title>
          <h2 style=" text-align: center">{{convocatoria.nombreConvocatoria |uppercase}}</h2>
        </mat-card-title>
        <mat-card-subtitle><strong>RESPONSABLE:
            {{convocatoria.solicitudEmpresa.responsablePPP.docente.abrevTitulo|uppercase}}
            {{convocatoria.solicitudEmpresa.responsablePPP.docente.persona.primerNombre|uppercase}}
            {{convocatoria.solicitudEmpresa.responsablePPP.docente.persona.primerApellido|uppercase}} </strong>
        </mat-card-subtitle>
        <span class="example-spacer"></span>

      </mat-card-header>
      <mat-card-content>
        <p><strong>CARRERA: </strong> {{convocatoria.solicitudEmpresa.carrera.nombre|uppercase}}</p>
        <p><strong>FECHA MÁXIMA DE RECEPCIÓN: </strong>{{convocatoria.fechaMaxima | date:'yyyy/MM/dd'}}</p>
        <p><strong>NUMERO DE CONVOCATORIA: </strong> {{convocatoria.idConvocatoria}} </p>
        <p><strong>ENTIDAD: </strong> {{convocatoria.solicitudEmpresa.empleado.empresa.nombreEmpresa|uppercase}}</p>
        <button class="mat-flat-button" style="width: 100% ; background-color:#91e705" colors="primary"
          (click)="crearSolicitud(convocatoria.idConvocatoria,id)">POSTULAR</button>

      </mat-card-content>
    </mat-card>


  </div>
</section>

<!------------------------------------------------------------------------------------------------------------------------------------------>
<!--Dialogo para mandar solicitud-->


<p-dialog [(visible)]="dialogoCrearSolicitud" [style]="{width:'60vw'}" [draggable]="false" [baseZIndex]="10000"
  [modal]="true" styleClass="p-fluid">
  <ng-template pTemplate="content">

    <form [formGroup]="formSolicitud" *ngFor="let alumno of alumnos">

      <div *ngIf="alumno.idAlumno==id">

     
        <!--LINEA 1-->
      <div class="form-row">
        <div class="form-group col-md-6">
          <label>CÉDULA:</label>
          <input  class="form-control" placeholder="{{alumno.persona.cedula |uppercase}}" [disabled]="true" >
        </div>

        <div class="form-group col-md-6">
          <label for="horasPPP">ALUMNO:</label>
          <input class="form-control" placeholder="{{alumno.persona.primerApellido |uppercase}} {{alumno.persona.segundoApellido |uppercase}} {{alumno.persona.primerNombre |uppercase}} {{alumno.persona.segundoNombre |uppercase}}"
          [disabled]="true">
        </div>
        
      </div>

       <!--LINEA 2-->
       <div class="form-row">
        <div class="form-group col-md-6">
          <label>CURSO:</label>
          <input  class="form-control" placeholder="{{alumno.ciclo |uppercase}} {{alumno.paralelo |uppercase}}" [disabled]="true" >
        </div>

        <div class="form-group col-md-6">
          <label for="horasPPP">SUBIR DOCUMENTO:</label>
          <input class="form-control" type="file">
        </div>
        
      </div>
<!--LINEA 3-->
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="fechaEmision">FECHA SOLICITUD:</label>
          <input type="date" class="form-control" id="fechaEmision" formControlName="fechaEmision"[(ngModel)]="solicitudAlumno.fechaEmision"   >
        </div>

        <div class="form-group col-md-6">
          <label for="horasPPP">NÚMERO DE HORAS:</label>
          <input type="number" class="form-control" id="horasPPP" formControlName="horasPPP" [(ngModel)]="solicitudAlumno.horasPPP">
        </div>
        
      </div>


      <!--LINEA EXTRA-->
     
        <input type="text" id="idConvocatoria" formControlName="idConvocatoria" [(ngModel)]="solicitudAlumno.convocatoria.idConvocatoria"style="visibility: hidden;">
        <input type="text" id="idAlumno" formControlName="idAlumno" [(ngModel)]="solicitudAlumno.alumno.idAlumno"style="visibility: hidden;" >
        <input type="text" id="estado"  formControlName="estado" [(ngModel)]="solicitudAlumno.estado" style="visibility: hidden;">
     
      <br><br>

      <!--BOTONES-->

      <div class="row text-center">
        <div class="form-group col-md-6">
          <button type="submit" (click)=' generate("Franklin Dominguez")' class="btn" style="background: #1d3557; color: white;">DESCARGAR DOCUMENTO</button>
         </div>
          <div class="form-group col-md-6">
            <button type="submit" (click)='create()' class="btn" style="background: #1d3557; color: white;">MANDAR SOLICITUD</button>
          </div>
        
      </div>


    </div>
    </form>      
  </ng-template>
  
</p-dialog>