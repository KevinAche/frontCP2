
<div class="card card-w-title" style="padding: 55px;">
    <h1>Empresas</h1>
    <p-table #dt id="tempresas" 
        [value]="empresas" 
        [paginator]="true" 
        [columns]="cols" 
        [rows]="10" 
        [showCurrentPageReport]="true"
        [rowsPerPageOptions]="[10,25,50]" 
        [paginator]="true"
        [globalFilterFields]="['nombreEmpresa','ruc']"
        styleClass="p-datatable-customers p-datatable-gridlines"
        >

        <ng-template pTemplate="caption">
            <div class="p-grid">
                <div class="p-col" style="text-align: left;">
                    <p>Lista de Empresas</p>
                </div>
                <div class="p-col" style="text-align: right">
                  <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
                  <input type="text" pInputText size="50" placeholder="Busqueda: Nombre de empresa o ruc"
                      (input)="dt.filterGlobal($any($event.target).value, 'contains')" style="width:auto">
              </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of cols">
                    {{col.header}}
                </th>
            </tr>
        </ng-template>
        <tbody style="font-size:20px;">
          <tr *ngFor="let empresa of empresas">
            <td *ngFor="let col of cols">
              <div [ngSwitch]="col.field">
                  
                <span *ngSwitchDefault>{{empresa[col.field]}}</span>
              </div>
            </td>
            <td>
              <a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
              <a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
          </td>
          </tr>
          </tbody>
        <ng-template pTemplate="body" >
            <tr *ngFor="let empresa of empresas">
              <td>{{empresa.ruc}}</td>
              <td>{{empresa.nombreEmpresa}}</td>
              <td>{{empresa.vision}}</td>
              <td>{{empresa.mision}}</td>
              <td>{{empresa.telefono}}</td>
              <td>{{empresa.direccion}}</td>
              <td>{{empresa.duracionConvenio}}</td>
              <td>
                  <a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                  <a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
              </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td [attr.colspan]="cols.length">No hay datos.</td>
            </tr>
        </ng-template>
        
    </p-table>
    <br><br>
    <div class="text-center">
        <button type="submit" class="btn btn-danger" [routerLink]="['/registro-empresa']">Regresar</button>
    </div>
    
</div>
<p-dialog header="Editar empresa" [(visible)]="dis" [modal]="true" [style]="{width: '40vw', height: '20vw'}"
        [maximizable]="false" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
        <form [formGroup]="formEmpresa">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="ruc">RUC:</label>
                <input type="text" class="form-control" [(ngModel)]="empresa.ruc" id="ruc"  formControlName="ruc" placeholder="Ingrese el RUC">
              </div>
              <div class="form-group col-md-6">
                <label for="empresa">Nombre Empresa:</label>
                <input type="text" class="form-control" id="empresa"  formControlName="empresa" [(ngModel)]="empresa.nombreEmpresa" placeholder="Ingrese el nombre de la empresa">
              </div>
            </div>
            <div class="form-group">
              <label for="vision">Visión:</label>
              <input type="text" class="form-control" id="vision" formControlName="vision" [(ngModel)]="empresa.vision"  placeholder="Ingrese la visión de la empresa">
            </div>
            <div class="form-group">
              <label for="mision">Misión:</label>
              <input type="text" class="form-control" id="mision" formControlName="mision" [(ngModel)]="empresa.mision"  placeholder="Ingrese la misión de la empresa" >
            </div>
            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="telefono">Telefono:</label>
                <input type="text" class="form-control"  id="telefono" formControlName="telefono" [(ngModel)]="empresa.telefono"  placeholder="123456789">
              </div>
              <div class="form-group col-md-4">
                <label for="direccion">Direccion:</label>
                <input type="text" class="form-control" id="direccion" formControlName="direccion" [(ngModel)]="empresa.direccion"  placeholder="Apartamento, ciudad y provincia">
              </div>
              <div class="form-group col-md-4">
                <label for="duracionConvenio">Duración convenio:</label>
                <select class="form-select" id="duracionConvenio" formControlName="duracionConvenio" [(ngModel)]="empresa.duracionConvenio"  aria-label="Default select example">
                  <option selected>Seleccione la duración</option>
                  <option value="1">6 meses</option>
                  <option value="2">1 año</option>
                  <option value="3">2 años</option>
                  <option value="3">4 años</option>
                </select>
                
              </div>
            </div>
    
          </form>
        <p-footer>
            <button type="button" pButton icon="pi pi-save"  label="Editar"></button>
            <button type="button" pButton icon="pi pi-times" (click)="dis=false" label="Cancelar" class="ui-button-secondary"></button>
        </p-footer>
    </p-dialog>